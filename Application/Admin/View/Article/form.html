<include file="Public/header" />

<div class="wrapper">

<include file="Public/nav" />
  <!-- Left side column. contains the logo and sidebar -->
  <include file="Public/sidebar"/>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <ol class="breadcrumb" style="left:10px;font-size:16px;">
        <li><a href="<{:U('Index/index')}>"><i class="fa fa-dashboard"></i> 首页</a></li>
        <li class="active">留言信息</li>
      </ol> 
    </section>
    <div class="clearfix" style="margin-top:40px;"></div>
    
    <!-- Main content -->
    <section class="content">
     <!-- /section:settings.box -->
        <div class="row">
            <div class="col-xs-12">
                <form class="form-horizontal" id="form" method="post" action="<{:U('update')}>">

                    <!-- PAGE CONTENT BEGINS -->

                    <input type="hidden" name="aid" value="<{$article.aid}>" id="aid"/>
                    <div class="form-group">
                        <label class="col-sm-1 control-label no-padding-right" for="form-field-0">
                            文章分类 </label>
                        <div class="col-sm-9">
                            <select id="sid" name="sid" class="col-xs-10 col-sm-5">
                                <option value="0">--分类--</option>
                                <{$categoryTree}>
                            </select>

                            <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle">选择所属分类。</span>
                                    </span>
                        </div>
                    </div>

                    <div class="space-4"></div>
                    <div class="form-group">
                        <label class="col-sm-1 control-label no-padding-right" for="form-field-1">
                            文章标题 </label>
                        <div class="col-sm-9">
                            <input type="text" name="title" id="title" placeholder="文章标题"
                                   class="col-xs-10 col-sm-5" value="<{$article['title']}>">
                            <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle">文章标题不能为空。</span>
                                    </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-1 control-label no-padding-right" for="form-field-1">
                            SEO标题 </label>
                        <div class="col-sm-9">
                            <input type="text" name="seotitle" id="seotitle" placeholder="SEO标题"
                                   class="col-xs-10 col-sm-5" value="<{$article['seotitle']}>">
                            <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle">如果设置SEO标题，将会在IE标题栏显示SEO标题。</span>
                                    </span>
                        </div>
                    </div>

                    <div class="space-4"></div>

                    <div class="form-group">
                        <label class="col-sm-1 control-label no-padding-right" for="form-field-2">
                            关键词 </label>
                        <div class="col-sm-9">
                            <input type="text" name="keywords" id="keywords" placeholder="关键词"
                                   class="col-xs-10 col-sm-5" value="<{$article['keywords']}>">
                            <span class="help-inline col-xs-12 col-sm-7">
                                        <span class="middle">文章关键词。</span>
                                    </span>
                        </div>
                    </div>

                    <div class="space-4"></div>

                    <div class="form-group">
                        <label class="col-sm-1 control-label no-padding-right" for="form-field-3">
                            文章摘要 </label>
                        <div class="col-sm-9">
                                <textarea name="description" id="description" placeholder="文章摘要"
                                          class="col-xs-10 col-sm-5"
                                          rows="5"><{$article['description']}></textarea>
                            <span class="help-inline col-xs-12 col-sm-7">
                                <span class="middle">文章摘要、描述。</span>
                            </span>
                        </div>
                    </div>
                    <div class="space-4"></div>
                    <div class="form-group">
                        <label class="col-sm-1 control-label no-padding-right" for="form-field-4">
                            缩略图 </label>
                        <div class="col-sm-9">
                            <div class="col-xs-10 col-sm-5">
                                
                            </div>
                            <span class="help-inline col-xs-12 col-sm-7">
                                <span class="middle">仅支持jpg、gif、png、bmp、jpeg，且小于1MB。</span>
                            </span>
                        </div>

                    </div>
                    <div class="space-4"></div>

                    <div class="form-group">
                        <label class="col-sm-1 control-label no-padding-right" for="form-field-2">
                            文章内容 </label>
                        <div class="col-sm-9">
                            <div>
                                <script id="editor" type="text/plain" style="width:95%;height:400px;"></script>
                                <textarea id="content" style="visibility:hidden;"><{$article['content']}>   
                                </textarea>
                            </div>
                                <!--<textarea name="content" id="content"
                                          style="width:100%;height:400px;visibility:hidden;"><{$article['content']}></textarea>-->
                        </div>
                    </div>
                    <div class="space-4"></div>
                    <div class="col-xs-offset-4 col-xs-9">
                        <button class="btn btn-info submit" type="button">
                            <i class="icon-ok bigger-110"></i>
                            提交
                        </button>

                        &nbsp; &nbsp; &nbsp;
                        <button class="btn" type="reset">
                            <i class="icon-undo bigger-110"></i>
                            重置
                        </button>
                    </div>

                    <!-- PAGE CONTENT ENDS -->


                </form>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </section>
    <!-- /.content -->
  </div>



  
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

    <!-- jQuery -->
    <script src="__PUBLIC__/Resources/js/jquery.min.js"></script>
    <!-- Bootstrap 3.3.6 -->
    <script src="__PUBLIC__/Resources/js/bootstrap.min.js"></script>
    <!-- AdminLTE App -->
    <script src="__PUBLIC__/Resources/dist/js/app.min.js"></script>
    
    <script src="__PUBLIC__/Resources/js/bootbox.js"></script>

    <script charset="utf-8" src="__PUBLIC__/kindeditor/kindeditor-min.js"></script>
    <script charset="utf-8" src="__PUBLIC__/kindeditor/lang/zh_CN.js"></script>


    <!--ueditor-->
    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/ueditor/ueditor.all.min.js"> </script>
    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/ueditor/lang/zh-cn/zh-cn.js"></script>

    <style type="text/css">
        div
        {
            width:100%;
        }
    </style>

    <script type="text/javascript">
        //实例化编辑器
        //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
        var ue = UE.getEditor('editor');
        var content = $('#content').text();
        ue.ready(function() {
            //设置编辑器的内容
            ue.setContent(content);
        });
        /*ue.ready(function() {
            //设置编辑器的内容
            ue.setContent('hello');
            //获取html内容，返回: <p>hello</p>
            var html = ue.getContent();
            //获取纯文本内容，返回: hello
            var txt = ue.getContentTxt();
        });*/
    </script>

    <script type="text/javascript">
        $(function () {
            /*$("#tabs").tabs();*/
            var editor = KindEditor.create('textarea[name="content"]', {
                uploadJson: '__PUBLIC__/kindeditor/php/upload_json.php',
                fileManagerJson: '__PUBLIC__/kindeditor/php/file_manager_json.php',
                allowFileManager: true,
                afterBlur: function () {
                    this.sync();
                }
            });
            $(".submit").click(function () {
                var sid = $("#sid").val();
                var title = $("#title").val();
                var content = ue.getContent();
                if (sid == 0) {
                    bootbox.dialog({
                        title: '友情提示：',
                        message: "文章分类必须选择。",
                        buttons: {
                            "success": {
                                "label": "确定",
                                "className": "btn-danger"
                            }
                        }
                    });
                    return;
                }
                if (title == '') {
                    bootbox.dialog({
                        title: '友情提示：',
                        message: "文章标题必须填写。",
                        buttons: {
                            "success": {
                                "label": "确定",
                                "className": "btn-danger"
                            }
                        }
                    });
                    return;
                }
                if (content == '') {
                    bootbox.dialog({
                        title: '友情提示：',
                        message: "文章内容需要填写。",
                        buttons: {
                            "success": {
                                "label": "确定",
                                "className": "btn-danger"
                            }
                        }
                    });
                    return;
                    return;
                }
                $("#form").submit();
            });
        });
    </script>
    
    </body>
</html>